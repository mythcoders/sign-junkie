.row
  .col.col-lg-6.mb-2
    - if @workshop.images.any?
      %img.mb-2.center-img{alt: "Image of #{@workshop.name}", src: url_for(@workshop.images.first), height: 500}
      #lightgallery
        - @workshop.images.each do |img|
          %a{href: url_for(img)}
            - if img.previewable?
              = image_tag img.preview(resize_to_limit: [150, 150])
            - else
              %img{src: url_for(img), height: 150, width: 150}
    - else
      %img.card-img-top{alt: "Image of #{@workshop.name}", src: '/cover.jpg', height: 350}
  .col.col-lg-6.mb-2
    .card
      %h4.card-header.bg-primary.text-white
        = @workshop.name
      - if user_signed_in?
        - if @workshop.can_purchase?
          = form_for :cart, url: cart_index_path do |f|
            = f.hidden_field :workshop_id, value: @workshop.id
            .card-body
              = render partial: 'body'
              = render partial: 'form', locals: { f: f }
            .card-footer
              = ticket_dropdown f, @workshop
        - else
          .card-body
            = render partial: 'body'
            .text-muted Sorry, but tickets for this workshop can't be purchased right now
      - else
        .card-body
          = render partial: 'body'
          %a.btn.btn-primary(href=new_user_session_path)
            = fa_light 'sign-in'
            Log In or Sign up to add this to your cart

= content_for :styles do
  %style{src: "https://cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/src/css/lightgallery.css"}

= content_for :scripts do
  %script{src: "https://cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/lib/js/lightgallery.min.js"}
  :javascript
    lightGallery(document.getElementById('lightgallery'));
