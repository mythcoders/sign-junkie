- page_title @workshop.name, 'workshops'

.header
  .header-body
    .row.align-items-center
      .col-auto
        .avatar.avatar-lg.avatar-4by3
          - if @workshop.workshop_images.any?
            %img.avatar-img.rounded{:alt => "Image of #{@workshop.name}", :src => url_for(@workshop.workshop_images.first)}
          - else
            %img.avatar-img.rounded{:alt => 'Placed holder image', :src => "/cover.jpg"}
      .col.ml-n3.ml-md-n2
        %h6.header-pretitle Workshops
        %h1.header-title= @workshop.name
      .col-12.col-md-auto.mt-3.mt-md-0
        = render partial: 'admin/workshops/header'

.row
  .col-12.col-lg-4
    .card
      .card-header
        .row.align-items-center
          .col
            %h2.card-header-title
              Overview
          .col-auto
            %span.badge.badge-primary= @workshop.workshop_type.name
          .col-auto= render partial: 'statuses/workshop', locals: { workshop: @workshop }
      .card-body
        - if @workshop.description
          .form-group
            .form-control-plaintext= @workshop.description
        .form-group
          %label.col-form-label Seating availability
          .row.align-items-center.no-gutters
            .col-auto
              %span.mr-2= "#{@workshop.seats_available}/#{@workshop.total_seats}"
            .col
              .progress.progress-sm.ml-2
                = render partial: 'admin/workshops/availability_bar', locals: { value: @workshop.seating_availability }
        %hr
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3 Scheduled
          .media-body.text-right
            %span.font-weight-medium
              .span= @workshop.when
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3 Purchase start
          .media-body.text-right
            %span.font-weight-medium
              .span= special_date @workshop.purchase_start_date
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3 Individual seat deadline
          .media-body.text-right
            %span.font-weight-medium
              .span= special_date @workshop.purchase_end_date
        - if @workshop.reservations_allowed?
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3 Booking deadline
            .media-body.text-right
              %span.font-weight-medium
                .span= special_date @workshop.booking_deadline
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3 Registration deadline
            .media-body.text-right
              %span.font-weight-medium
                .span= special_date @workshop.registration_deadline
        %hr
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :individual_seats_allowed)
          .media-body.text-right
            %span.font-weight-medium
              .span= human_boolean @workshop.single_seats_allowed?
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :reservations_allowed)
          .media-body.text-right
            %span.font-weight-medium
              .span= human_boolean @workshop.reservations_allowed?
        - if @workshop.reservations_allowed?
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :multiple_reservations_allowed)
            .media-body.text-right
              %span.font-weight-medium
                .span= human_boolean @workshop.multiple_reservations_allowed?
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :reservation_minimum_seats)
            .media-body.text-right
              %span.font-weight-medium
                .span= @workshop.reservation_minimum_seats
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :reservation_maximum_seats)
            .media-body.text-right
              %span.font-weight-medium
                .span= @workshop.reservation_maximum_seats
          .media.align-items-center.mb-4
            .font-size-1.font-weight-normal.mb-0.mr-3= label(:workshop, :reservation_price)
            .media-body.text-right
              %span.font-weight-medium
                .span= number_to_currency @workshop.reservation_price
  .col-12.col-lg-8
    %ul#workshopTab.nav.nav-tabs.mb-2{role: "tablist"}
      %li.nav-item
        %a#attendee-tab.nav-link.active{"aria-controls": "attendee", "aria-selected": "true", "data-toggle": "tab", href: "#attendee", role: "tab"}
          = fa_solid 'chair'
          Attendees
      %li.nav-item
        %a#project-tab.nav-link{"aria-controls": "project", "aria-selected": "false", "data-toggle": "tab", href: "#project", role: "tab"}
          = fa_solid 'sign'
          Projects
      %li.nav-item
        %a#image-tab.nav-link{"aria-controls": "image", "aria-selected": "false", "data-toggle": "tab", href: "#image", role: "tab"}
          = fa_solid 'images'
          Images

    #workshopTabContent.tab-content
      #attendee.tab-pane.fade.show.active{"aria-labelledby": "attendee-tab", role: "tabpanel"}
        = render partial: 'attendees', locals: { workshop: @workshop }
      #project.tab-pane.fade{"aria-labelledby": "project-tab", role: "tabpanel"}
        = render partial: 'admin/projects/list', locals: { projects: @workshop.projects }
      #image.tab-pane.fade{"aria-labelledby": "image-tab", role: "tabpanel"}
        = render partial: 'admin/images/list', locals: { images: @workshop.workshop_images }
