- @order.tickets_grouped.each do |workshop, tickets|
  .card.mb-2
    %h4.card-header.bg-primary.text-white
      = fa_solid 'ticket-alt'
      = workshop.name
      %br
      %small
        = fa_solid 'calendar-alt', 'fa-fw'
        = workshop.when
        - if workshop.is_private?
          %br
          Private Workshop
    %ul.list-group
      %li.list-group-item.list-group-item-info= "Choose project and make payment by #{l(workshop.book_by_date)}"
    %table.table.table-bordered.table-striped.table-border-fix.table-sm
      %tbody
        - tickets.sort_by { |t| t.created_at }.each_with_index do |ticket, index|
          = f.fields_for ticket, index: ticket.id do |ff|
            %tr
              %td.action-column
                - if ticket.score == 1
                  = fa_solid 'check', 'text-success fa-fw'
                - elsif ticket.score <= 0.9 && ticket.score >= 0.25
                  = fa_solid 'exclamation', 'text-warning fa-fw'
                - else
                  = fa_solid 'times', 'text-danger fa-fw'
                %span.badge.badge-primary= ticket.short_id
              - unless ticket.assignee.present?
                %td{colspan: 2}
                  .form-row
                    .form-group.col
                      %label Attendee
                      %input.form-control-plaintext{value: 'Not assigned', disabled: true}
                      -# %input.form-control-plaintext{value: ticket.assignee.full_name, disabled: true}
              - else
                %td
                  .form-row
                    .form-group.col
                      %label Attendee
                      %input.form-control-plaintext{value: ticket.assignee.full_name, disabled: true}
                  - if workshop.is_public?
                    .form-row
                      .form-group.col
                        = ff.label :requested_seating
                        = ff.text_field :seating, class: 'form-control'
                %td
                  - if ticket.payment.present?
                    .form-row
                      .form-group.col
                        %label Project
                        %input.form-control-plaintext{value: ticket.project, disabled: true}
                    .form-row
                      .form-group.col-6
                        = ff.label :design
                        = ff.text_field :design, class: 'form-control'
                      .form-group.col-6
                        %label Addon
                        %input.form-control-plaintext{value: ticket.addon, disabled: true}
                  - else
                    .form-row
                      .form-group.col
                        = ff.label :project
                        = ff.text_field :project, class: 'form-control'
                    .form-row
                      .form-group.col-6
                        = ff.label :design
                        = ff.text_field :design, class: 'form-control'
                      .form-group.col-6
                        = ff.label :addon
                        = ff.text_field :addon, class: 'form-control'
