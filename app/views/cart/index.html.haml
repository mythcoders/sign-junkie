.row
  .col-12.col-lg-8.mb-2
    .row.justify-content-center
      .col
        .card
          %h3.card-header.bg-primary.text-white
            = fa_solid 'shopping-cart'
            Shopping cart
        %ul.list-group
          - if @cart.any?
            - @cart.each do |item|
              %li.list-group-item
                .row
                  = render partial: 'item_descriptions/cart', locals: {item: item}
          - else
            %li.list-group-item
              %a.btn.btn-info.btn-block(href=workshops_public_path)
                View PUBLIC Workshop dates
              %a.btn.btn-info.btn-block(href=workshops_private_path)
                View PRIVATE Workshop dates

  .col-12.col-lg-4
    .card
      %h5.card-header.bg-primary.text-white Order summary
      .card-body
        .media.align-items-center.mb-3
          .font-size-1.font-weight-normal.mb-0.mr-3= "Item subtotal (#{@cart_count})"
          .media-body.text-right
            %span.font-weight-medium
              - if @cart_subtotal.positive?
                = content_tag :span, number_to_currency(@cart_subtotal), id: "total-amt"
              - else
                .span --
        .media.align-items-center.mb-3
          .font-size-1.font-weight-normal.mb-0.mr-3 Estimated tax
          .media-body.text-right
            %span.font-weight-medium
              - if @estimated_tax.positive?
                = number_to_currency @estimated_tax
              - else
                .span --
        .media.align-items-center.mb-4
          .font-size-1.font-weight-normal.mb-0.mr-3 Total
          .media-body.text-right
            %span.font-weight-medium
              - if @cart_total.positive?
                = number_to_currency @cart_total
              - else
                .span --
        - if @cart.any?
          = form_tag new_invoice_path, method: 'get' do
            - if current_user.credit_balance.positive?
              .card.border-0.mb-3
                .card-body.p-0
                  .custom-control.custom-checkbox.small
                    = check_box_tag :gift_cards, 'true', false, class: 'custom-control-input'
                    %label.custom-control-label{for: 'gift_cards'}
                      = "Apply #{number_to_currency current_user.credit_balance} in gift cards towards this purchase"
            = submit_tag 'Proceed to Checkout', class: 'btn btn-info btn-block'
